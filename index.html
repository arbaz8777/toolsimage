<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Size Reducer | Compress Images Online</title>
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #a29bfe;
            --accent: #fd79a8;
            --light: #f8f9fa;
            --dark: #2d3436;
            --success: #00b894;
            --info: #0984e3;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
        }
        
        h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .upload-area {
            border: 3px dashed var(--secondary);
            padding: 50px 30px;
            margin: 25px 0;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            background-color: rgba(162, 155, 254, 0.05);
            position: relative;
            overflow: hidden;
        }
        
        .upload-area:hover {
            border-color: var(--primary);
            background-color: rgba(108, 92, 231, 0.05);
            transform: translateY(-3px);
        }
        
        .upload-area::before {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }
        
        .upload-area:hover::before {
            left: 100%;
        }
        
        .upload-area p {
            font-size: 1.1rem;
            color: var(--primary);
            margin: 0;
        }
        
        .upload-area i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
            display: block;
        }
        
        #file-input {
            display: none;
        }
        
        .controls {
            margin: 30px 0;
            padding: 20px;
            background-color: rgba(108, 92, 231, 0.05);
            border-radius: 10px;
        }
        
        .slider-container {
            margin: 20px 0;
            text-align: left;
        }
        
        .slider-container label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            border-radius: 10px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .value-display {
            font-weight: bold;
            color: var(--primary);
        }
        
        button {
            background: linear-gradient(to right, var(--primary), var(--accent));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(108, 92, 231, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .download-btn {
            background: linear-gradient(to right, var(--success), #55efc4);
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
        }
        
        .download-btn:hover {
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
        }
        
        .preview {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .image-container {
            flex: 1;
            min-width: 300px;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        
        .image-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .image-container h3 {
            color: var(--primary);
            margin-top: 0;
        }
        
        .image-container img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .info {
            margin: 15px 0;
            padding: 10px;
            background-color: rgba(108, 92, 231, 0.05);
            border-radius: 5px;
            font-size: 0.9rem;
            color: var(--dark);
        }
        
        .description {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: left;
            margin-top: 30px;
        }
        
        .description h2 {
            color: var(--primary);
            margin-top: 0;
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
        }
        
        .features {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .feature-card {
            flex: 1;
            min-width: 250px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(108, 92, 231, 0.1) 0%, rgba(162, 155, 254, 0.1) 100%);
            border-radius: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .feature-card h3 {
            color: var(--primary);
            margin-top: 0;
        }
        
        .how-to-use {
            background-color: rgba(0, 184, 148, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--success);
        }
        
        .how-to-use h3 {
            color: var(--success);
            margin-top: 0;
        }
        
        .how-to-use ol {
            padding-left: 20px;
        }
        
        .how-to-use li {
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .container, .description {
                padding: 20px;
            }
            
            .preview {
                flex-direction: column;
            }
            
            .upload-area {
                padding: 30px 20px;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1><i class="fas fa-image"></i> Photo Size Reducer</h1>
        <p style="color: var(--info); font-size: 1.1rem;">Compress your images without losing quality</p>
        
        <div class="upload-area" id="upload-area">
            <i class="fas fa-cloud-upload-alt"></i>
            <p>Click to upload an image or drag and drop</p>
            <p style="font-size: 0.9rem; color: var(--secondary);">Supports JPG, PNG, GIF, WEBP</p>
            <input type="file" id="file-input" accept="image/*">
        </div>
        
        <div class="controls" id="controls" style="display: none;">
            <div class="slider-container">
                <label for="quality">Compression Quality: <span class="value-display" id="quality-value">70</span>%</label>
                <input type="range" id="quality" min="1" max="100" value="70">
            </div>
            
            <div class="slider-container">
                <label for="width">Maximum Width: <span class="value-display" id="width-value">800</span>px</label>
                <input type="range" id="width" min="100" max="2000" value="800" step="10">
            </div>
            
            <button id="reduce-btn"><i class="fas fa-compress-alt"></i> Reduce Size</button>
        </div>
        
        <div class="preview" id="preview" style="display: none;">
            <div class="image-container">
                <h3><i class="fas fa-image"></i> Original Image</h3>
                <img id="original-img" src="" alt="Original">
                <p class="info" id="original-info"></p>
            </div>
            <div class="image-container">
                <h3><i class="fas fa-file-image"></i> Compressed Image</h3>
                <img id="compressed-img" src="" alt="Compressed">
                <p class="info" id="compressed-info"></p>
                <button class="download-btn" id="download-btn"><i class="fas fa-download"></i> Download</button>
            </div>
        </div>
    </div>

    <div class="description">
        <h2><i class="fas fa-info-circle"></i> About Photo Size Reducer</h2>
        <p>Our free online tool helps you reduce the file size of your images while maintaining good quality. Perfect for optimizing photos for websites, social media, or email attachments without compromising too much on visual quality.</p>
        
        <div class="features">
            <div class="feature-card">
                <h3><i class="fas fa-bolt"></i> Fast Processing</h3>
                <p>All compression happens in your browser - no waiting for server processing or file uploads.</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-lock"></i> Privacy Guaranteed</h3>
                <p>Your images never leave your computer. We don't store or access your files.</p>
            </div>
            <div class="feature-card">
                <h3><i class="fas fa-chart-line"></i> Smart Compression</h3>
                <p>Advanced algorithms reduce file size while preserving image quality.</p>
            </div>
        </div>
        
        <div class="how-to-use">
            <h3><i class="fas fa-question-circle"></i> How to Use</h3>
            <ol>
                <li><strong>Upload your image</strong> by clicking or dragging and dropping</li>
                <li><strong>Adjust the settings</strong> - choose your preferred quality and dimensions</li>
                <li><strong>Click "Reduce Size"</strong> to compress your image</li>
                <li><strong>Download the result</strong> and use it wherever you need</li>
            </ol>
        </div>
        
        <h3><i class="fas fa-lightbulb"></i> Why Reduce Image Size?</h3>
        <p>Smaller image files load faster on websites, use less bandwidth, and take up less storage space. This is especially important for:</p>
        <ul>
            <li>Website optimization (faster page loads)</li>
            <li>Email attachments (stay within size limits)</li>
            <li>Social media sharing (faster uploads)</li>
            <li>Mobile devices (save storage space)</li>
        </ul>
    </div>

    <script>
        // All the JavaScript from the previous version remains exactly the same
        const fileInput = document.getElementById('file-input');
        const uploadArea = document.getElementById('upload-area');
        const controls = document.getElementById('controls');
        const preview = document.getElementById('preview');
        const qualitySlider = document.getElementById('quality');
        const qualityValue = document.getElementById('quality-value');
        const widthSlider = document.getElementById('width');
        const widthValue = document.getElementById('width-value');
        const reduceBtn = document.getElementById('reduce-btn');
        const originalImg = document.getElementById('original-img');
        const compressedImg = document.getElementById('compressed-img');
        const originalInfo = document.getElementById('original-info');
        const compressedInfo = document.getElementById('compressed-info');
        const downloadBtn = document.getElementById('download-btn');
        
        let originalFile = null;
        let compressedBlob = null;
        
        // Update slider values
        qualitySlider.addEventListener('input', () => {
            qualityValue.textContent = qualitySlider.value;
        });
        
        widthSlider.addEventListener('input', () => {
            widthValue.textContent = widthSlider.value;
        });
        
        // Handle file upload
        uploadArea.addEventListener('click', () => {
            fileInput.click();
        });
        
        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--accent)';
            uploadArea.style.backgroundColor = 'rgba(253, 121, 168, 0.05)';
        });
        
        uploadArea.addEventListener('dragleave', () => {
            uploadArea.style.borderColor = 'var(--secondary)';
            uploadArea.style.backgroundColor = 'rgba(162, 155, 254, 0.05)';
        });
        
        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.style.borderColor = 'var(--secondary)';
            uploadArea.style.backgroundColor = 'rgba(162, 155, 254, 0.05)';
            
            if (e.dataTransfer.files.length) {
                fileInput.files = e.dataTransfer.files;
                handleFileSelect();
            }
        });
        
        fileInput.addEventListener('change', handleFileSelect);
        
        function handleFileSelect() {
            if (fileInput.files && fileInput.files[0]) {
                originalFile = fileInput.files[0];
                
                // Check if file is an image
                if (!originalFile.type.match('image.*')) {
                    alert('Please select an image file.');
                    return;
                }
                
                // Display original image
                const reader = new FileReader();
                reader.onload = function(e) {
                    originalImg.src = e.target.result;
                    
                    // Show file info
                    originalInfo.textContent = `Size: ${formatFileSize(originalFile.size)} 
                                            | Dimensions: (loading...)`;
                    
                    // Wait for image to load to get dimensions
                    originalImg.onload = function() {
                        originalInfo.textContent = `Size: ${formatFileSize(originalFile.size)} 
                                                | Dimensions: ${originalImg.naturalWidth}×${originalImg.naturalHeight}`;
                    };
                    
                    // Show controls and preview
                    controls.style.display = 'block';
                    preview.style.display = 'flex';
                };
                reader.readAsDataURL(originalFile);
            }
        }
        
        // Reduce image size
        reduceBtn.addEventListener('click', reduceImageSize);
        
        function reduceImageSize() {
            if (!originalFile) return;
            
            reduceBtn.disabled = true;
            reduceBtn.textContent = 'Processing...';
            reduceBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
            
            const quality = parseInt(qualitySlider.value) / 100;
            const maxWidth = parseInt(widthSlider.value);
            
            const img = new Image();
            img.src = URL.createObjectURL(originalFile);
            
            img.onload = function() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Calculate new dimensions maintaining aspect ratio
                let width = img.width;
                let height = img.height;
                
                if (width > maxWidth) {
                    height = Math.round((height * maxWidth) / width);
                    width = maxWidth;
                }
                
                canvas.width = width;
                canvas.height = height;
                
                // Draw image on canvas
                ctx.drawImage(img, 0, 0, width, height);
                
                // Convert to blob with specified quality
                canvas.toBlob(function(blob) {
                    compressedBlob = blob;
                    const compressedUrl = URL.createObjectURL(blob);
                    
                    // Display compressed image
                    compressedImg.src = compressedUrl;
                    compressedImg.onload = function() {
                        compressedInfo.textContent = `Size: ${formatFileSize(blob.size)} 
                                                    | Dimensions: ${width}×${height}
                                                    | ${Math.round((blob.size / originalFile.size) * 100)}% of original`;
                        
                        reduceBtn.disabled = false;
                        reduceBtn.innerHTML = '<i class="fas fa-compress-alt"></i> Reduce Size';
                    };
                }, originalFile.type, quality);
            };
        }
        
        // Download compressed image
        downloadBtn.addEventListener('click', function() {
            if (!compressedBlob) return;
            
            const a = document.createElement('a');
            a.href = URL.createObjectURL(compressedBlob);
            a.download = 'compressed_' + originalFile.name;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });
        
        // Helper function to format file size
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
    </script>
</body>
</html>
